---
title: "C_C++-静态库"
date: 2022-08-15
categories: [C_C++]
tags: [C_C++]
excerpt: "静态库"
---

# 静态库

```mermaid
graph LR;
    X(格式)
    X --> A(Linux) --> A1(".o/.a")
    X --> B(Windows) --> B1(".obj/.lib")
```

## 概念

TODO

## 编写

```c++
#ifndef __HELLO_HPP__
#define __HELLO_HPP__

#include <stdio.h>

void hello();

#endif
```

```c
#include "hello.h"

void hello() {
    printf("Hello World!\n");
}
```

```c
// main.c
#include "hello.h"

int main(void) {
    hello();
    return 0;
}
```

`-c` 只激活预处理, 编译, 和汇编, 仅生成.o 目标文件

```c
gcc hello.c -c -o hello.o
```

### Linux

```sh
ar hello.o -crv libhello.a 
```

```mermaid
graph LR;
    X(参数)
    X --> A(ar) --> A1(用于创建、修改提取静态库)
    X --> B(**-c**) --> B1(表示创建新库, 若库已存在则覆盖)
    X --> C(**-r**) --> C1(表示将目标文件插入到库中, 如库已存在, 新对象文件将被追加)
    X --> D(**-v**) --> D1(表示详细输出, 显示添加到库中的文件名)
```

### 链接

```c
gcc main.c -c -o main.o

gcc main.o libhello.a -o main
```

## 使用

TODO
