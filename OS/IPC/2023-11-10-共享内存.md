---
title: "共享内存"
date: 2023-11-10
categories: [OS]
tags: [OS]
excerpt: "共享内存"
---

# 共享内存

头文件

```c
#include <sys/ipc.h>
#include <sys/shm.h>
```

## 创建

```c
/**
 *      IPC_CREAT 若不存在则创建
 *      IPC_EXCL 若已存在则返回失败 
 *      success 共享内存标识符
 *      fail -1
*/
int shmget(key_t key, size_t size,int shmflg);
```

## 映射

```c
/**
 *      0 共享内存具有刻度可写权限
 *      SHM_RDONLY 只读
 *      SHM_RND shmaddr非空时才有效
 *      success 共享内存段映射地址
 *      fail -1
*/
void *shmat(int shmid, const void *shmaddr, int shmflg);
```

## 解除映射

```c
/**
 *      success 0
 *      fail -1 
*/
int shmdt(const void* shmaddr);
```
