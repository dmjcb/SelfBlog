---
title: "docker-X86环境运行ARM容器"
date: 2024-11-09
categories: [docker]
tags: [docker]
excerpt: "X86环境运行ARM容器"
---

# X86运行ARM容器

## 配置QEMU

```sh
docker run --rm --privileged multiarch/qemu-user-static --reset -p yes
```

在Docker容器中运行multiarch/qemu-user-static工具, 以重置或配置QEMU用户模式模拟的二进制文件, 使其能够在具有不同架构的容器中运行

![](/Resource/Imgur/20241109_153104.jpg)

### 指令解析

#### 容器参数

- --rm

容器停止后自动删除, 可以避免留下冗余容器, 节省系统资源

- --privileged

给予容器几乎等同于宿主机root权限, 通常设置给运行时需要访问宿主机硬件或内核功能的容器

- multiarch/qemu-user-static

镜像名称, multiarch/qemu-user-static镜像包含QEMU用户模式模拟的用户空间二进制文件, 其允许在A架构宿主机上运行B构二进制文件

#### qemu-user-static参数

- --reset

重置之前为当前系统架构配置的QEMU用户模式二进制文件

若之前为不同架构配置QEMU, 且现在想要清除配置时使用

- -p yes

通知qemu-user-static探测当前系统架构, 并自动配置适当QEMU用户模式二进制文件, yes参数确认操作

## 拉取ARM镜像

```sh
docker pull --platform linux/arm64 [镜像名]
```

- 测试

```sh
docker run --platform linux/arm64 alpine uname -m
```

![](/Resource/Imgur/20241109_153630.jpg)